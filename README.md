# PLOG-Generator

A simple & beautiful photography blog site generator, powered by Node.js and Electron.js.

![Site Preview](https://cdn.jsdelivr.net/gh/bochili/cdn3/photos/202410051317224.png)

## 简介

这是一个基于 Node.js 和 Electron.js 开发的桌面端应用，用于个人摄影集数据管理以及生成个人摄影集站点。

站点预览：[Demo](http://plogdemo.bochi.ink/)

我的个人摄影集：[影集](http://photo.bochi.ink/)

## 使用说明

### 1. 目录说明

当你在本地安装好 PLOG-Generator 后，软件会自动在 `用户目录/AppData/Roaming/plog-generator` 下创建`templates` 和 `static` 两个目录。

`templates` 为主题目录，`static` 为默认的数据目录，此时在软件内创建影集、扫描图片等所有操作都是在该目录下进行的。

#### 1.1 static目录

你可以在设置中选择一个新的 `static` 目录，此时需要你自行创建目录结构和文件：

```
static/
  data/
    sets.json    # 写入内容{}
    pics.json    # 写入内容{}
  pics/
    thumbnails/
```

在数据存放位置选择时，要把路径选择到static目录，如: `F:\Projects\Photography\formyownuse\staticData\static`，然后点击右下角的 “保存” 按钮。

#### 1.2 templates目录

在设置页面，点击 “前端模板” 中的 “模板目录” 按钮可以在文件资源管理器中打开主题目录，把编译后的模板目录拷贝到此处后，在设置页面的 “前端模板” 中点击 “刷新” 按钮，即可选择新导入的主题，选择后点击右下角的 “保存” 按钮。

完成后点击 “生成站点”，此时生成的站点所使用的主题就是你所选择的主题（记得先点击保存设置）。

### 2. 添加图片

**提示**：目前，我只建议使用 JPG 格式的照片进行添加，我认为其他格式照片要么不符合摄影作品的一般格式，要么兼容性欠佳，也许以后会尝试测试并支持其他格式的照片添加，但仍不建议使用。

在软件的 “图库” 页面，点击 ”打开图片目录“ 会唤起系统文件资源管理器，将你要添加的照片拷贝到所打开的目录（`static目录/pics` ）后，点击界面上的 ”扫描“ 按钮，软件会自动扫描目录下的所有图片文件，获取 EXIF 数据并生成缩略图至 `static目录/pics/thumbnails` ，如果图片较多，该操作会比较耗时，请耐心等待完成。

另外建议用户自行保留一份照片的原图，不要直接把原图放在 `static` 目录下。如果因软件运行问题或操作不当造成数据丢失，本人概不负责。

### 3. 图片信息

在图库界面，每个图片都是如下的展示形式：

![image-20241005025701536](https://cdn.jsdelivr.net/gh/bochili/cdn3/photos/202410050257570.png)

其中，左上角的编辑图片点击后可以打开编辑框，你可以给图片添加标题、地点、描述和标签信息，如果照片EXIF 数据存在并获取成功，日期、相机型号、镜头型号、焦距、光圈、快门、ISO 将会自动填入，在编辑完成后点击保存即可完成图片的编辑。

右上角为删除按钮，点击并二次确认后，图片文件、信息连同缩略图都会从 `static` 目录下删除，请谨慎确认。

左下角的云朵图标表示该图片为外部链接，而非本地图片。

### 4. 图片压缩

**提示：** 本操作仍只适用于JPG或JPEG格式的图片文件

在 “图库” 页面，点击 ”压缩本地图片“ 会弹出对话框，你可以选择压缩图片的质量，下方会显示本地图片的数量，点击确定后，程序将会把 `static目录/pics` 下的所有JPG或JPEG格式的照片文件（不包含子目录）进行指定质量的压缩。建议将压缩质量设在 > 60%，在不影响大图观感的同时可以尽量减少加载时间和流量消耗。

同样，若本地图片数量比较多，本操作也会比较耗时（单线程），请耐心等待。

![image-20241005030441868](https://cdn.jsdelivr.net/gh/bochili/cdn3/photos/202410050304903.png)

### 5. 通过PICGO上传本地图片

**提示**：本操作的前提是在本地或服务器上安装配置一个 [PICGO](https://github.com/Molunerfinn/PicGo) 客户端，并开启其 PicGo-Server，详细请阅读 PicGo 的文档。

在 “图库” 页面，点击 ”PICGO上传“ 会弹出对话框，你需要设置 PicGo-Server 的 HTTP URL，并填写 `static` 目录的上一级目录的绝对路径。正常情况下程序会自动填入，你需要检查内容是否正确。

如果勾选 ”上传后删除本地图片“ ，在图片上传成功后会自动删除本地 `static目录/pics` 下的大图文件，该选项默认勾选。

点击 ”选择图片“ ，程序会弹出只有本地图片的选择器，在选择好照片后点击选择器的确定，图片会添加到待上传列表，点击弹窗的确定，将会请求 PicGo-Server 的图片上传 API，进行上传云端。

如果本地图片比较大，或者数量比较多，本操作会比较耗时，需要耐心等待，而且不能关闭页面或刷新，会导致 PicGo 在后台上传完成后，程序收不到上传成功的返回，相当于上传没有执行。

![image-20241005031206053](https://cdn.jsdelivr.net/gh/bochili/cdn3/photos/202410050312094.png)

### 6. 创建影集

影集分为 “专题” 和 “普通” 两种类型，如果勾选为专题，归档页面将不会显示该影集的卡片（只针对默认主题，其他主题根据开发者的喜好自行决定），而普通类型也不会在 “专题” 页面显示。两种类型都可以勾选 “首页显示”。

在选择完图片列表后，方可选择头图，头图就是在首页或归档/专题页面显示内容卡片的大图。

**注意：** 在图库删除图片时，如果影集中包含该图片也会对应的从影集图片列表中删除该图片。

![image-20241005032158020](https://cdn.jsdelivr.net/gh/bochili/cdn3/photos/202410050321071.png)

### 7. 站点生成、预览

**注意：** 站点生成前将会把选择的输出目录下的所有内容清空，如果你选择到了一个本地 git 仓库或包含其他文件的目录，这些原有内容都会在生成时删除，建议选择到一个新的空目录。

内容和基础设置布置完成后，便可以生成站点了，你可以在设置页面中填写 “站点生成位置” 项，保存后，点击 “生成站点” 将会直接输出到选择的目录下，如果留空，则会每次点击生成时询问路径。

![image-20241005032848022](https://cdn.jsdelivr.net/gh/bochili/cdn3/photos/202410050328051.png)

若程序提示 “站点生成成功！” 你便可以预览站点，本操作将会在本地开启一个 Express 服务器，监听随机端口，点击停止即可关闭服务。

### 8. 发布站点

生成站点成功后，点击 “站点目录” 即可看到生成的网页文件，将其上传到 Github Pages 或自己的服务器上都可以。生成的网站是基于 Vue 3 框架的，数据通过 axios 请求 `static` 目录获取。 

### 9. 说明

如果使用或开发遇到任何问题或BUG，请提 issue，我看到会及时处理。

如果你觉得这个项目不错，请不要吝啬你的 star，这些鼓励也会是我坚持的动力。

## 开发使用的环境

```
Node.js v22.9.0
pnpm 9.11.0
```

## 相关仓库

https://github.com/bochili/plog-demo

https://github.com/bochili/plog-theme-pure

## 界面截图

![image-20241005022709297](https://cdn.jsdelivr.net/gh/bochili/cdn3/photos/202410050227529.png)

![image-20241005022722956](https://cdn.jsdelivr.net/gh/bochili/cdn3/photos/202410050227180.png)

![image-20241005022732961](https://cdn.jsdelivr.net/gh/bochili/cdn3/photos/202410050227022.png)
